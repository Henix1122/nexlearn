<!DOCTYPE html><html lang='en'>
<head>
  <meta charset='UTF-8'>
  <meta name='viewport' content='width=device-width,initial-scale=1.0'>
  <title>Generate Certificate - NexLearn</title>
  <link rel='icon' href='assets/favicon.ico'>
  <script src='https://cdn.tailwindcss.com'></script>
  <script src='https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js'></script>
  <style>.logo-text{background:linear-gradient(135deg,#3b82f6 0%,#8b5cf6 50%,#ec4899 100%);-webkit-background-clip:text;background-clip:text;color:transparent;font-weight:800}</style>
</head>
<body class='bg-gray-50 font-sans min-h-screen flex flex-col'>
  <nav class='bg-white shadow sticky top-0 z-40' data-component='main-nav'></nav>
  <main class='flex-grow max-w-3xl mx-auto w-full px-4 sm:px-6 lg:px-8 py-10'>
    <h1 class='text-3xl font-bold mb-6'>Generate Your Certificate</h1>
    <p class='text-sm text-gray-600 mb-8'>This page simulates certificate issuance. In production it should verify course completion & membership via the backend before issuing a signed certificate.</p>

    <form id='cert-form' class='bg-white p-6 rounded shadow space-y-6'>
      <div>
        <label class='block text-sm font-medium text-gray-700'>Your Full Name</label>
        <input name='name' required minlength='3' class='mt-1 w-full border rounded px-3 py-2 focus:ring-indigo-500 focus:border-indigo-500'>
      </div>
      <div>
        <label class='block text-sm font-medium text-gray-700'>Course</label>
        <select name='course' required class='mt-1 w-full border rounded px-3 py-2 focus:ring-indigo-500 focus:border-indigo-500'>
          <option value='Ethical Hacking Fundamentals'>Ethical Hacking Fundamentals</option>
          <option value='Digital Forensics Essentials'>Digital Forensics Essentials</option>
          <option value='Advanced Network Security'>Advanced Network Security</option>
          <option value='Cybersecurity Essentials'>Cybersecurity Essentials</option>
        </select>
      </div>
      <div>
        <label class='block text-sm font-medium text-gray-700'>Membership Plan</label>
        <select name='plan' required class='mt-1 w-full border rounded px-3 py-2 focus:ring-indigo-500 focus:border-indigo-500'>
          <option value='Basic'>Basic (0% discount)</option>
            <option value='Pro'>Pro (30% discount)</option>
            <option value='Enterprise'>Enterprise (30% discount)</option>
        </select>
      </div>
      <div>
        <label class='block text-sm font-medium text-gray-700'>Base Certificate Price (USD)</label>
        <input name='price' type='number' min='0' step='0.01' value='5.00' required class='mt-1 w-full border rounded px-3 py-2 focus:ring-indigo-500 focus:border-indigo-500'>
      </div>
      <div class='bg-indigo-50 border border-indigo-100 rounded p-4 text-sm text-indigo-800' id='price-box'>
        <p><span class='font-medium'>Computed Cost:</span> <span id='computed-price'>$5.00</span></p>
        <p class='mt-1 text-xs text-indigo-600' id='discount-note'>No discount applied.</p>
      </div>
      <button class='w-full bg-indigo-600 text-white py-2 rounded font-medium hover:bg-indigo-700'>Generate Certificate</button>
    </form>

    <div id='result' class='hidden mt-8 bg-white p-6 rounded shadow'>
      <h2 class='text-xl font-semibold mb-3 flex items-center'><i data-feather='award' class='w-5 h-5 text-indigo-600 mr-2'></i>Certificate Ready</h2>
      <p class='text-sm text-gray-600'>Your certificate preview link:</p>
      <div class='mt-3 flex items-center space-x-2'>
        <input id='cert-link' readonly class='flex-1 border rounded px-3 py-2 text-sm bg-gray-50'>
        <button id='copy-btn' class='px-3 py-2 text-sm bg-gray-800 text-white rounded hover:bg-gray-900'>Copy</button>
        <a id='open-btn' target='_blank' class='px-3 py-2 text-sm bg-indigo-600 text-white rounded hover:bg-indigo-700'>Open</a>
      </div>
      <p class='mt-4 text-xs text-gray-500'>Share this URL for verification. (In production, a signed serial & verification endpoint will be used.)</p>
    </div>
  </main>
  <footer class='bg-gray-800' data-component='main-footer'></footer>
  <script src='assets/js/main.js'></script>
  <script>
    const form=document.getElementById('cert-form');
    const priceInput=form.price;
    const planSelect=form.plan;
    const computedSpan=document.getElementById('computed-price');
    const discountNote=document.getElementById('discount-note');
    function recalc(){
      const base=parseFloat(priceInput.value || '0');
      const plan=planSelect.value;
      let discount=0;
      if(plan==='Pro' || plan==='Enterprise') discount=0.30; // 30% off members
      const final=base*(1-discount);
      computedSpan.textContent='$'+final.toFixed(2);
      discountNote.textContent=discount?`Membership discount applied: ${(discount*100)|0}%`:'No discount applied.';
    }
    priceInput.addEventListener('input',recalc); planSelect.addEventListener('change',recalc); recalc();

    form.addEventListener('submit',e=>{
      e.preventDefault();
      const fd=new FormData(form);
      const name=encodeURIComponent(fd.get('name'));
      const course=encodeURIComponent(fd.get('course'));
      const plan=encodeURIComponent(fd.get('plan'));
      // Simulated serial (client side) - replace with server-issued serial later
      const serial='NXL-'+Date.now().toString(36).toUpperCase();
      const url=`certificate.html?name=${name}&course=${course}&plan=${plan}&serial=${serial}`;
      const linkInput=document.getElementById('cert-link');
      linkInput.value=location.origin + '/' + url;
      document.getElementById('open-btn').href=url;
      document.getElementById('result').classList.remove('hidden');
      feather.replace();
    });
    document.getElementById('copy-btn').addEventListener('click',()=>{const input=document.getElementById('cert-link');input.select();document.execCommand('copy');});
  </script>
</body>
</html>
