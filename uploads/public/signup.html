<!DOCTYPE html><html lang='en'><head><meta charset='UTF-8'><meta name='viewport' content='width=device-width,initial-scale=1.0'><title>Sign Up - NexLearn</title><script src='https://cdn.tailwindcss.com'></script><link rel='icon' href='assets/favicon.ico'><script src='https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js'></script></head><body class='bg-gray-50 min-h-screen flex flex-col'>
<nav class='bg-white shadow-sm' data-component='main-nav'></nav>
<main class='flex-grow flex items-center justify-center px-4 sm:px-6 lg:px-8'>
  <div class='max-w-md w-full space-y-8 bg-white p-10 rounded-lg shadow'>
    <h2 class='text-center text-3xl font-extrabold text-gray-900'>Create account</h2>
  <form id='signup-form' class='space-y-5'>
      <div><label class='block text-sm font-medium text-gray-700'>Full Name</label><input name='name' required class='mt-1 w-full border rounded px-3 py-2 focus:ring-indigo-500 focus:border-indigo-500'></div>
      <div><label class='block text-sm font-medium text-gray-700'>Email</label><input name='email' type='email' required class='mt-1 w-full border rounded px-3 py-2 focus:ring-indigo-500 focus:border-indigo-500'></div>
      <div><label class='block text-sm font-medium text-gray-700'>Institution</label><input name='institution' class='mt-1 w-full border rounded px-3 py-2 focus:ring-indigo-500 focus:border-indigo-500'></div>
  <div><label class='block text-sm font-medium text-gray-700'>Password</label><input name='password' type='password' required class='mt-1 w-full border rounded px-3 py-2 focus:ring-indigo-500 focus:border-indigo-500' aria-describedby='pw-help'><p id='pw-help' class='mt-1 text-xs text-gray-500'>Must be 10+ chars with upper, lower, number, symbol.</p></div>
      <div><label class='block text-sm font-medium text-gray-700'>Confirm Password</label><input name='password2' type='password' minlength='8' required class='mt-1 w-full border rounded px-3 py-2 focus:ring-indigo-500 focus:border-indigo-500'></div>
      <div class='flex items-center'><input type='checkbox' required class='h-4 w-4 text-indigo-600 rounded border-gray-300'><span class='ml-2 text-xs text-gray-600'>I agree to Terms & Privacy.</span></div>
      <button class='w-full py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700'>Create Account</button>
    </form>
    <p class='text-sm text-center text-gray-600'>Already have an account? <a href='login.html' class='text-indigo-600'>Sign in</a></p>
  </div>
</main>
<footer class='bg-gray-800' data-component='main-footer'></footer>
<script src='assets/js/main.js'></script>
<script>
async function api(path,opts){return fetch(path,{headers:{'Content-Type':'application/json',...(opts&&opts.headers)},...opts}).then(r=>r.json().then(j=>({ok:r.ok,status:r.status,body:j})))}
document.getElementById('signup-form').addEventListener('submit',async e=>{
 e.preventDefault();
 const fd=new FormData(e.target);
 if(fd.get('password')!==fd.get('password2')){alert('Passwords do not match');return;}
 const payload={email:fd.get('email'),password:fd.get('password'),name:fd.get('name'),institution:fd.get('institution')};
 const res=await api('/auth/register',{method:'POST',body:JSON.stringify(payload)});
 if(!res.ok){alert('Signup failed: '+(res.body.error||JSON.stringify(res.body.details||res.body.errors||res.body)));return;}
 // auto login
 const login=await api('/auth/login',{method:'POST',body:JSON.stringify({email:payload.email,password:payload.password})});
 if(!login.ok){alert('Auto login failed');location.href='login.html';return;}
 const user={id:login.body.user.id,email:login.body.user.email,role:login.body.user.role,token:login.body.token, initials: (payload.name? payload.name[0]: payload.email[0]).toUpperCase()};
 localStorage.setItem('nex_user',JSON.stringify(user));
 location.href='dashboard.html';
});
</script>
</body></html>
