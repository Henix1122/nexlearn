<!DOCTYPE html><html lang='en'><head><meta charset='UTF-8'><meta name='viewport' content='width=device-width,initial-scale=1.0'><title>Certificate - NexLearn</title><script src='https://cdn.tailwindcss.com'></script><link rel='icon' href='assets/favicon.ico'></head><body class='bg-gray-100 font-sans'>
<main class='max-w-4xl mx-auto my-10 bg-white shadow-lg p-10 rounded relative'>
  <div class='absolute inset-0 border-8 border-indigo-600 rounded pointer-events-none'></div>
  <div class='text-center relative z-10'>
    <h1 class='text-4xl font-extrabold logo-text mb-2'>NexLearn</h1>
    <p class='tracking-wide text-gray-600'>Certificate of Achievement</p>
    <p class='mt-8 text-sm text-gray-500'>This certifies that</p>
    <h2 id='cert-name' class='mt-2 text-3xl font-bold text-gray-900'>[Learner Name]</h2>
    <p class='mt-6 text-sm text-gray-500'>has successfully completed the course</p>
    <h3 id='cert-course' class='mt-2 text-xl font-semibold text-gray-800'>[Course Title]</h3>
    <p id='cert-plan' class='mt-4 text-xs uppercase tracking-wider text-indigo-600'>Membership Tier: Basic</p>
    <p class='mt-10 text-xs text-gray-400'>Issued on <span id='cert-date'></span></p>
  </div>
  <div class='mt-16 flex justify-between items-center text-xs text-gray-500 relative z-10'>
    <div class='text-center'><div class='h-10 border-b'></div><p class='mt-2'>Instructor</p></div>
    <div class='text-center'><div class='h-10 border-b'></div><p class='mt-2'>Director of Education</p></div>
  </div>
  <div id='cert-extra' class='mt-8 text-center text-xs text-gray-500'></div>
  <div id='error-box' class='hidden mt-8 text-center text-red-600 text-sm'></div>
  <button id='print-btn' onclick='window.print()' class='mt-10 mx-auto block bg-indigo-600 text-white px-5 py-2 rounded text-sm'>Print / Save PDF</button>
</main>
<script>
 (async function(){
   const params=new URLSearchParams(location.search);
   const serial=params.get('serial');
   const nameEl=document.getElementById('cert-name');
   const courseEl=document.getElementById('cert-course');
   const planEl=document.getElementById('cert-plan');
   const dateEl=document.getElementById('cert-date');
   const extra=document.getElementById('cert-extra');
   const err=document.getElementById('error-box');
   const printBtn=document.getElementById('print-btn');
   if(!serial){ err.textContent='Missing certificate serial.'; err.classList.remove('hidden'); printBtn.classList.add('hidden'); return; }
   extra.innerHTML='<span class="animate-pulse">Verifying certificate...</span>';
   try {
     const res=await fetch('/certificates/verify/'+encodeURIComponent(serial));
     if(res.status===404){ err.textContent='Certificate not found or invalid.'; err.classList.remove('hidden'); extra.innerHTML=''; printBtn.classList.add('hidden'); return; }
     const data=await res.json();
     if(!data.valid){ err.textContent='Invalid certificate.'; err.classList.remove('hidden'); extra.innerHTML=''; printBtn.classList.add('hidden'); return; }
     nameEl.textContent=data.user.email;
     courseEl.textContent=data.course.title;
     planEl.textContent='Membership Tier: '+data.plan;
     dateEl.textContent=new Date(data.issuedAt).toLocaleDateString();
     extra.innerHTML=`<p>Serial: <code class='px-1 py-0.5 bg-gray-100 rounded text-gray-700'>${data.serial}</code> Â· <a class='text-indigo-600 hover:underline' href='verify-certificate.html?serial=${data.serial}'>Verify Online</a></p>`;
   } catch(e){ err.textContent='Network error while verifying.'; err.classList.remove('hidden'); extra.innerHTML=''; printBtn.classList.add('hidden'); }
 })();
</script>
</body></html>
